# 软件设计模式

## 第1章 设计模式基础

### 1.1 软件设计模式概述

#### 概念

- 软件设计模式，又称设计模式，是一套被反复使用、多数人知晓的、经过分类编目的、代码设计经验的总结。
- 描述了在软件设计过程中的一些不断重复发生的问题，及该问题的解决方案。
- 是解决问题的一系列套路，是前辈们的代码设计经验总结，具有一定的普遍性，可以反复使用。

#### 目的

- 提高代码可重用性、可读性、可靠性。

#### 本质

- 是面向对象设计原则的实际运用，是对类的封装性、继承性、多态性以及类的关联关系和组合关系的充分理解。

#### 意义

- 提高程序员的思维能力、编程能力、设计能力。
- 使程序设计更加标准化、代码编制更加工程化，提高软件开发效率，缩短开发周期。
- 使设计的代码可重用性高、可读性强、可靠性好、灵活性好、可维护性强。

#### 基本要素

> 通常包括：**模式名称**、**问题**、**解决方案**、**效果**、别名、动机、结构、模式角色、合作关系、实现方法、适用性、已知应用、例程、模式扩展和相关模式等（其中，粗体标注为关键要素）。

- 模式名称：
  - 可以根据模式的问题、特点、解决方案、功能和效果，用一两个词来描述。
  - 有助于我们理解和记忆该模式，同时方便我们讨论设计。
- 问题：
  - 描述了该模式的应用环境：何时使用该模式。
  - 解释了设计问题和问题存在的前因后果，及必须满足的先决条件。
- 解决方案：
  - 包括设计的组成成分、他们之间的相互关系、各自的职责及协作关系。
  - 并不描述一特定、具体的设计或实现，而是提供设计问题的抽象描述和怎样用一个具有一般意义的元素（类或对象）组合来解决问题。
- 效果：
  - 描述了模式的应用效果及使用该模式应权衡的问题，即模式的优缺点。
  - 主要是对时间、空间的衡量；对系统灵活性、扩充性、可移植性的影响；以及实现问题。

#### 分类

- 根据目的来分：
  - 创建型模式：
    - 用于描述“怎样创建对象”。
    - 主要特点是“将对象的创建和使用相分离”。
  - 结构型模式：
    - 用于描述如何将类或对象按某种布局组成更大的结构。
  - 行为型模式：
    - 用于描述类或对象之间怎么相互协作共同完成单个对象都无法完成的任务，及怎样分配职责。
- 根据作用范围来分
  - 类模式：
    - 用于处理类与子类之间的关系，这些关系通过继承来建立，是**静态**的，在编译时就确定下来。
  - 对象模式：
    - 用于处理对象之间的关系，这些关系通过组合或聚合来实现，在运行时可以变化，更具有**动态性**。

|范围\目的| 创建型模式 | 结构型模式 | 行为型模式 |
| :------: | :----: | :---------: | :------: |
|  类模式  | 工厂方法 | （类）适配器 | 模板方法、解释器 |
| 对象模式 | 单例<br/>原型<br/>抽象工厂<br/>建造者 | 代理<br/>（对象）适配器<br/>桥接<br/>装饰<br/>外观<br/>享元<br/>组合 | 策略<br/>命令<br/>职责<br/>链状态<br/>观察者<br/>中介者<br/>迭代器<br/>访问者<br/>备忘录 |

### 1.2 UML中的类图

>UML(统一建模语言，Unified Modeling Langugage)，是用来设计软件蓝图的可视化建模语言。
>特点：简单、统一、图形化、能表达软件设计中的动态与静态信息。
>从目标系统的不同角度出发，定义了：**用例图、类图、对象图、状态图、活动图、时序图、协作图、构件图、部署图**9种。

#### 元素格式

- 属性（Attribute）： ——成员变量
  - [可见性] 属性名: 类型 [=默认值]
- 操作（operation）：——成员方法
  - [可见性] 名称(参数列表) [:返回类型]

> 可见性：包括公有(public, +)、私有(private, -)、保护(protacted, #)、朋友(friendly, ~)。

#### 类之间的关系

- 依赖关系
  - 是一种使用关系。
  - 对象之间耦合度最弱。
  - 临时的关联。
  - UML图中，用带箭头的虚线表示，箭头从使用类指向被依赖类。
- 关联关系
  - 是一种引用关系，表示两类对象之间的联系。
  - 分为一般关联关系、聚合关系、组合关系：
